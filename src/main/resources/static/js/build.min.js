/* taskList - v0.0.1 - 2018-10-01 */

!function(t){t.appUtils||(t.appUtils=new Object(null));var r=t.appUtils;r.Class=function(t){var n=function(){t&&t.prototype.$_buildObject.call(this,{}),this.$_buildObject()};return n.prototype.$_buildObject=function(){},t&&((n.prototype=Object.create(t.prototype)).$_parentClass=t),n.extend=function(t){var e=t.extended;for(var i in t)n[i]=t[i];e&&e(n)},n.includeMthd=function(t){var e=t.included;for(var i in t)n.prototype[i]=t[i];e&&e(n)},n.prototype.includeFd=function(t){var e=t.included;for(var i in t)this[i]=t[i];e&&e(n)},n.prototype.includeDefineFd=function(t,e){var i={configurable:!0,enumerable:!0,get:function(){return""}};e.enumerable&&(i.enumerable=e.enumerable),e.get&&(i.get=e.get),Object.defineProperty(this,t,i)},n},r.makeDate=function(t){return new Date(t)},r.getClass=function(t){return{}.toString.call(t).slice(8,-1)},r.fillValuesProperty=function(t,e){for(var i in t){var n=t[i];if(i in e&&(!(0<=i.indexOf("$$"))&&"function"!=typeof n))if(angular.isDate(n))e[i]=n;else if(angular.isArray(n)){var a=!1;e[i]?e[i].fillByTemplate&&(e[i].fillByTemplate(n),a=!0):e[i]=[],n.fillByTemplate?(e[i].fillByTemplate=n.fillByTemplate,e[i].fillByTemplate(n)):a||(e[i]=n),n.representationList&&(e[i].representationList=n.representationList)}else null==n?e[i]=n:"object"==typeof n?(e[i]||(e[i]={}),r.fillValuesProperty(n,e[i])):e[i]=n}return e},r.fillAllValuesProperty=function(t,e){for(var i in t){var n=t[i];0<=i.indexOf("$$")||(angular.isDate(n)?e[i]=n:angular.isArray(n)?(e[i]||(e[i]=[]),n.fillByTemplate?(e[i].fillByTemplate=n.fillByTemplate,e[i].fillByTemplate(n)):e[i]=n,n.representationList&&(e[i].representationList=n.representationList)):null==n?e[i]=n:"object"==typeof n?(e[i]||(e[i]={}),r.fillAllValuesProperty(n,e[i])):e[i]=n)}return e},r.clearProperties=function(t){for(var e in t){var i=t[e];"number"==typeof i?i=0:"string"==typeof i?i="":"boolean"==typeof i?i=!1:"Date"===this.getClass(i)?i=new Date:"object"==typeof i&&this.clearProperties(i)}},r.find=[].indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},r.ucFirst=function(t){return t?t[0].toUpperCase()+t.slice(1):t},r.log=function(){if("undefined"!=typeof console){var t=jQuery.makeArray(arguments);t.unshift("(App:)"),console.log.apply(console,t)}}}(window),function(t){t.appDirective||(t.appDirective=new Object(null));var e=t.appDirective;e.directiveLoginPage=function(){return{restrict:"E",require:"",replace:!0,templateUrl:"/templates/appRoom/tasklist/directive/app-template-form-login.html",scope:{eventAfterLogin:"&"},controller:["$http","$rootScope","$scope","dataStorage",function(i,t,n,a){n.credentials={},n.login=function(){var t=a.getAppMetadaSet();if(t){var e=t.userInterface.security.principal;e&&e.login(i,n.credentials,function(t){t.authenticated&&n.eventAfterLogin()})}}}]}},e.directiveMessageLine=function(){return{restrict:"E",require:"",templateUrl:"/templates/appRoom/tasklist/directive/app-template-message-line.html",scope:{errorDescriptions:"="},link:function(t,e,i){},controller:["$scope","dataStorage",function(e,t){e.updateErrorDescription=function(){e.errorDescriptions=t.getErrorDescriptions()},e.deleteErrorDescription=function(t){e.errorDescriptions.delErrorDescription(t),0==e.errorDescriptions.errorsCount()&&(e.errorDescriptions.show=!1)}}]}},e.directiveMenuBar=function(){return{restrict:"E",require:"",replace:!0,templateUrl:"/templates/appRoom/tasklist/directive/app-template-menu-bar.html",scope:{menuBar:"="}}},e.directiveMenuCollection=function(){return{restrict:"E",require:"",replace:!0,templateUrl:"/templates/appRoom/tasklist/directive/app-template-menu-collection.html",scope:{menuCollection:"=",command:"="}}},e.directiveMenuItem=function(a){return{restrict:"E",require:"",replace:!0,templateUrl:"/templates/appRoom/tasklist/directive/app-template-menu-item.html",scope:{command:"="},link:function(t,e,i){if(t.command.dropdownMenu){var n=a("<menu-collection command = 'command' menu-collection='command.commandList'></menu-collection>")(t);e.replaceWith(n)}},controller:["$scope","$window","$location",function(t,e,i){t.commandHandler=function(){"string"==typeof t.command.command?i.url(t.command.command):t.command.command()}}]}},e.directiveUpdatableText=function(r){return{restrict:"E",scope:{fCallBack:"&"},link:function(t,e,i){var n,a=function(){e.text(t.fCallBack())};t.$watch(i.smCurrentTime,function(){a()}),e.on("$destroy",function(){r.cancel(n)}),n=r(function(){a()},1e3)}}},e.directiveCurrentTime=function(r,o){return{link:function(t,e,i){var n,a=function(){e.text(o(new Date,"M/d/yy h:mm:ss a"))};t.$watch(i.smCurrentTime,function(){a()}),e.on("$destroy",function(){r.cancel(n)}),n=r(function(){a()},1e3)}}}}(window),function(t){t.appDirective||(t.appDirective=new Object(null));var e=new Object(null);function n(t){null!=t.property&&("enum"==t.property.inputType?t.property.entityListService()&&(t.selectList=t.property.entityListService().list):"select"!=t.property.inputType&&"multiselect"!=t.property.inputType||t.property.entityListService()&&(t.selectList=t.property.entityListService().list))}(t.appDirective.formsDirective=e).directiveButton=function(){return{restrict:"E",compile:function(t,e){t.addClass("btn"),"submit"===e.type?t.addClass("btn-primary"):t.addClass("btn-default"),e.size&&t.addClass("btn-"+e.size)}}},e.directiveDatePicker=function(){return{require:"ngModel",link:function(t,e,i,n){n.$formatters.push(function(t){if(t=new Date(t),angular.isDefined(t)&&null!==t&&!angular.isDate(t))throw new Error("ng-Model value must be a Date object");return t}),n.$parsers.push(function(t){return t.getTime()})}}},e.directiveEntityProperty=function(){return{restrict:"E",require:"",templateUrl:"/templates/appRoom/tasklist/directive/entityEditDirective/app-template-entity-property.html ",scope:{entity:"=",property:"="},link:function(t,e,i){n(t)},controller:["$scope",function(t){t.refreshSelectList=n(t),t.propertyChanged=function(){}}]}},e.directiveEntityEditForm=function(){return{restrict:"E",require:"",templateUrl:"/templates/appRoom/tasklist/directive/entityEditDirective/app-template-entity-edit-form.html ",scope:{entityEditForm:"="},link:function(t,e,i){},controller:["$scope",function(t){t.closeForm=function(){t.entityEditForm.eventCloseForm()},t.updateForm=function(){t.entityEditForm.eventUpdateForm()},t.createEntity=function(){t.entityEditForm.eventCreateEntity(t.entityEditForm.currentEntity)}}]}},e.directiveEntityEditFormRow=function(){return{restrict:"E",require:"",templateUrl:"/templates/appRoom/tasklist/directive/entityEditDirective/app-template-entity-edit-form-row.html ",scope:{entityfieldsrow:"=",entityeditform:"="},link:function(t,e,i){}}},e.directiveEntityEditFormCol=function(a){return{restrict:"E",require:"",templateUrl:"/templates/appRoom/tasklist/directive/entityEditDirective/app-template-entity-edit-form-col.html ",scope:{fieldplacing:"=",entityeditform:"="},link:function(t,e,i){if(angular.isArray(t.fieldplacing.editFieldId)){var n=a("<div ng-repeat='entityfieldsrow in fieldplacing.editFieldId track by $index'><entity-edit-form-row entityfieldsrow='entityfieldsrow' entityeditform='entityeditform'> </entity-edit-form-row></div>")(t);e.replaceWith(n)}}}},e.directiveEntityListForm=function(){return{restrict:"E",require:"",templateUrl:"/templates/appRoom/tasklist/directive/entityEditDirective/app-template-entity-list-form.html ",scope:{entityListForm:"="},link:function(t,e,i){},controller:["$scope",function(e){e.closeForm=function(){e.entityListForm.eventCloseForm()},e.updateForm=function(){e.entityListForm.eventUpdateForm(),e.entityListForm.entities=e.entityListForm.appMetadataSet.getEntityList(e.entityListForm.metadataName).list},e.findEntity=function(t){e.entityListForm.eventFindEntity(t),e.entityListForm.entities=e.entityListForm.appMetadataSet.getEntityList(e.entityListForm.metadataName).list},e.addNewEntity=function(){e.entityListForm.eventAddNewEntity()},e.deleteEntity=function(t){e.entityListForm.eventDeleteEntity(t)},e.editEntity=function(t){e.entityListForm.eventEditEntity(t)}}]}}}(window),function(exp){exp.appService||(exp.appService=new Object(null));var appService=exp.appService;appService.dataStorage=function(t){var e=t,i=null,n=new Object(null);return{getAppConfig:function(){return e},getAppMetadaSet:function(){return i},setAppMetadataSet:function(t){i=t},setCurrentEntityByName:function(t,e){null!=t&&(n[t]=e)},getCurrentEntityByName:function(t){return null!=t?(null==n[t]&&(currentUser=this.getNewEntityByName(t)),n[t]):null},getNewEntityByName:function(t){return this.getAppMetadaSet().getEntityInstance(t)}}},appService.appEnvironment=function(t,e){var i=t;return{getAppHttpUrl:function(t){return"http://"+i.$$host+":"+i.$$port+"/"+e.appName+t}}},appService.setRoute=function(t){return t.when("/login",{templateUrl:"/login"}).when("/user",{templateUrl:"/appTaskList/security/usersList"}).when("/role",{templateUrl:"/appTaskList/security/roleList"}).when("/farm",{templateUrl:"/appTaskList/farmsList"}).when("/project",{templateUrl:"/appTaskList/projectsList"}).when("/task",{templateUrl:"/appTaskList/tasksList"}).when("/currentPrincipalInformation",{templateUrl:"/appTaskList/currentPrincipalInformation"}).when("/cashFlow",{templateUrl:"/appCashAccounting/cashFlowList"}).when("/cashFlowItem",{templateUrl:"/appCashAccounting/cashFlowItemList"}),t},appService.appHttpResponseInterceptor=function(n,a){return{request:function(t){return t.url=t.url.split("%2F").join("/"),t},response:function(t){var e=a.getAppMetadaSet();if(e){var i=e.userInterface.errorDescriptions;i&&i.handleResponse(t)}return t},responseError:function(t){var e=a.getAppMetadaSet();if(e){var i=e.userInterface.errorDescriptions;i&&i.handleResponse(t)}return n.reject(t)}}},appService.entityEditService=function(t,e){return t(e.getAppHttpUrl("/entity/:entityName/:entityId"),{entityName:"@entityName",entityId:"@entityId"},{getEntity:{method:"GET"},createEntity:{method:"POST"},deleteEntity:{method:"DELETE"}})},appService.securityService=function(t,e){return t(e.getAppHttpUrl("/system/security/:command"),{sessionID:"@sessionID"},{getAllPrincipals:{method:"GET",params:{command:"getAllPrincipals"}},getSessionInformation:{method:"GET",params:{command:"getSessionInformation"}}})},appService.operationService=function(t,e){return t(e.getAppHttpUrl("/service/:command"),{command:"@command"},{executeCommand:{method:"GET"}})},appService.systemService=function(t,e){return t(e.getAppHttpUrl("/system/:command"),{command:"@command"},{executeCommand:{method:"GET"}})},appService.resourceService=function(t,e,i,n){var a=t,r=e,o=i,s=n;return{getEntityEditService:function(){return a},getSystemService:function(){return r},getSecurityService:function(){return o},getOperationService:function(){return s}}},appService.ExecuteSystemCommand=function(t,e){t.getSystemService().executeCommand({command:e},{})},appService.ExecuteServiceCommand=function(t,e){t.getOperationService().executeCommand({command:e},{})};var appInterface=Object.create(null);!function(){var Principal=appUtils.Class();!function(){Principal.prototype.$_buildObject=function(){this.includeFd({authenticated:!1,name:"NO_Authentication",sessionId:null,authorities:[],currentUserId:0,currentUser:{}})};var i=function(t){t.authenticated=!1,t.name="NO_Authentication",t.sessionId=null,t.authorities=[],t.currentUserId=0,t.currentUser={}};Principal.includeMthd({logout:function(t){var e=this;t.post("/appTaskList/logout",{}).finally(function(){e.authenticated=!1,i(e)})},login:function(t,e,i){var n,a,r,o,s=this;n=t,r=function(t){t.authenticated?(console.log("Login succeeded"),e.error=!1):(console.log("Login failed"),e.error=!0),s.setAuthenticated(t.principal),i&&i(s)},o=(a=e)?{authorization:"Basic "+btoa(a.username+":"+a.password)}:{},n.get("/appTaskList/service/authenticate",{headers:o}).then(function(t){if(200==t.data.status)var e=t.data.data;r&&r({authenticated:!0,principal:e})},function(){r&&r({authenticated:!1,principal:void 0})})},getSessionInformation:function(t,e){var i=t.getSecurityService(),n=this;i.getSessionInformation({},{},function(t){if(200==t.status){var e=t.data;n.setAuthenticated(e)}})},updatePrincipalUser:function(e){var i=this;e.metadataEvents.publish("ev:entityList:user:update",function(){var t=e.getEntityList("user");t&&(i.currentUser=t.findEntityById(i.currentUserId))})},setAuthenticated:function(t){i(self),null!=t&&(this.authenticated=!0,this.name=t.userName,this.sessionId=t.sessionId,this.authorities=t.authorities,this.currentUserId=t.currentUserId)}})}();var ErrorDescription=appUtils.Class();ErrorDescription.prototype.$_buildObject=function(){this.includeFd({error:!1,status:0,statusText:"",type:"success"})},ErrorDescription.includeMthd({SetHTTPError:function(t,e){this.error=!0,this.status=e,this.statusText="HTTP error: "+t},SetNoError:function(){this.error=!1,this.status=200,this.statusText=""},SetAppError:function(t){this.error=!0,this.status=0,this.statusText="App error: "+t}});var ErrorDescriptions=appUtils.Class();!function(){ErrorDescriptions.prototype.$_buildObject=function(){this.includeFd({errorDescriptions:[],show:!1})},ErrorDescriptions.includeMthd({handleResponse:function(response){var errorDescription=new ErrorDescription;if(errorDescription.SetNoError(),200==response.status||404==response.status||403==response.status){var objectResponse=response.data;objectResponse instanceof Object?"message"in objectResponse&&"status"in objectResponse&&200!=response.data.status&&errorDescription.SetAppError(objectResponse.message):200!=response.status&&(objectResponse=eval("("+response.data+")"),errorDescription.SetAppError(objectResponse.message))}else errorDescription.SetHTTPError(response.statusText,response.status);errorDescription.error&&(this.addErrorDescription(errorDescription),this.show=!0)},addErrorDescription:function(t){this.errorDescriptions.push(t)},delErrorDescription:function(t){this.errorDescriptions.splice(t,1)},getErrorDescriptions:function(){return this.errorDescriptions},errorsCount:function(){return this.errorDescriptions.length}})}();var EditForm=appUtils.Class();EditForm.prototype.$_buildObject=function(){this.includeFd({editFormName:"<--label for form--\x3e",formProperties:{},formPropertiesPlacing:{},eventCloseForm:function(){},eventUpdateForm:function(){}})};var EntityEditForm=appUtils.Class(EditForm);EntityEditForm.prototype.$_buildObject=function(){this.includeFd({currentEntity:{},eventCreateEntity:function(){}})};var EntityListForm=appUtils.Class(EditForm);EntityListForm.prototype.$_buildObject=function(){this.includeFd({entities:[],eventAddNewEntity:function(){},eventDeleteEntity:function(t){},eventEditEntity:function(t){},eventFindEntity:function(){}})};var MenuCommand=appUtils.Class();MenuCommand.prototype.$_buildObject=function(){this.includeFd({commandName:"",dropdownMenu:!1,text:"",command:null,commandList:[]})},MenuCommand.includeMthd({addCommand:function(t){return this.commandList.push(t),this},getSubMenu:function(t){for(var e=0;e<this.commandList.length;e++){var i=this.commandList[e];if(i.commandName===t)return i;if(0<i.commandList.length)return i.getSubMenu(t)}}});var UserInterface=appUtils.Class();UserInterface.prototype.$_buildObject=function(){this.includeFd({security:{principal:new Principal},errorDescriptions:new ErrorDescriptions,commandBar:{mainUrl:"#",commandBar:new MenuCommand},appMetadataSet:null})},UserInterface.includeMthd({commandBarSetMainUrl:function(t){return this.commandBar.mainUrl=t,this},commandBarAddCommand:function(t){return this.commandBar.commandList.push(t),this},editFormGetEntityEditForm:function(){return new EntityEditForm},editFormGetEntityListForm:function(){return new EntityListForm}}),appInterface.UserInterface=UserInterface,appInterface.getNewEntityCommand=function(t,e){var i=new MenuCommand;return i.dropdownMenu=!1,i.commandName=t,i.text=e,i.command=t,i},appInterface.getNewDropdownCommand=function(t,e){var i=new MenuCommand;return i.dropdownMenu=!0,i.commandName=t,i.text=e,i},appInterface.getNewCommand=function(t,e,i){var n=new MenuCommand;return n.dropdownMenu=!1,n.commandName=t,n.text=e,n.command=i,n}}();var abstractAppModel=Object.create(null);!function(){var t=appUtils.Class();t.prototype.$_buildObject=function(){this.includeFd({events:$({})})},t.includeMthd({subscribe:function(){this.events.bind.apply(this.events,arguments)},unSubscribe:function(){this.events.unbind.apply(this.events,arguments)},publish:function(){this.events.trigger.apply(this.events,arguments)}});var l=new t,e=appUtils.Class();!function(){e.prototype.includeEntityFd=function(t,e,i){var n="";if(this.includeFd({entityFd:""}),t&&this.includeFd(t),e){for(var a in this.includeFd(e),e)n=n+", "+a;0<n.length&&(n=n.slice(2)),this.includeFd({entityFd:n})}if(i)for(var a in i)this.includeDefineFd(a,i[a])},e.prototype.$_buildObject=function(){this.includeEntityFd({metadataName:""},{id:null,description:""},{representation:{enumerable:!0,get:function(){return this.name?""+this.name:"entity ["+this.metadataName+"] id: "+this.id}}})},e.includeMthd({isEmpty:function(){return 0==this.id||null==this.id},translateToEntityJSON:function(){var t=this.entityFd.split(", ");return JSON.stringify(this,t)},createEntity:function(t){this.metadataName;var e=this.translateToEntityJSON();abstractAppModel.resourceService.getEntityEditService().createEntity({entityName:this.metadataName},e,i.bind(this,t),function(t){})}});var i=function(){var t=arguments[0],e=arguments[1];if(e.result=200){var i=e.data;i&&(appUtils.fillValuesProperty(i,this),t(this))}}}();var c=appUtils.Class();!function(){c.prototype.$_buildObject=function(){this.includeFd({metadataName:"",list:[],metadataObject:null})};var n=function(t,e){if(e.result=200){var i=e.data;i&&i.forEach(function(t,e,i){var n=this.metadataObject.getEntityInstance();appUtils.fillValuesProperty(t,n),this.addEntity(n)},this),console.log("Update "+this.metadataObject.metadataName)}t&&t(this)};c.includeMthd({addEntity:function(t){for(var e=!1,i=0;i<this.list.length;++i){if(this.list[i].id===t.id)return this.list[i]=t,void(e=!0)}e||this.list.push(t)},findEntityById:function(t){for(var e=0;e<this.list.length;++e){var i=this.list[e];if(i.id===t)return i}},addEntityByTemplate:function(t,e){var i=null;i=t.isEmpty()?this.metadataObject.getEntityInstance(this.metadataName):this.findEntityById(t.id);var n=this;appUtils.fillValuesProperty(t,i),i.createEntity(function(t){n.addEntity(t),e()})},update:function(e){var i=this;i.list=[],abstractAppModel.resourceService.getEntityEditService().getEntity({entityName:this.metadataName},{},function(t){n.call(i,e,t)},function(t){})},findEntity:function(t,e){var i=this;i.list=[],abstractAppModel.resourceService.getEntityEditService().getEntity({entityName:this.metadataName,search:t},{},function(t){n.call(i,e,t)},function(t){})},deleteEntity:function(t,e){abstractAppModel.resourceService.getEntityEditService().deleteEntity({entityName:this.metadataName,entityId:t},{},function(){var i=arguments[0],t=arguments[1];(arguments[2].result=200)&&this.list.forEach(function(t,e){if(t.id==i)return this.list.splice(e,1),!0},this),t&&t(this)}.bind(this,t,e),function(t){})}})}();var i=appUtils.Class();i.prototype.$_buildObject=function(){this.includeFd({metadataName:"",list:{}})},i.includeMthd({update:function(){var e=this;abstractAppModel.resourceService.getEntityEditService().getEntity({entityName:"enum",entityId:this.metadataName},{},function(t){e.list=t.data},function(t){})}});var a=appUtils.Class();a.prototype.$_buildObject=function(){this.includeFd({name:"",inputType:"text",label:"<--label for property--\x3e",entityListService:{},availability:!0,visibility:!0,availabilityInEditForm:!0,visibilityInEditForm:!0,availabilityInListForm:!0,visibilityInListForm:!0})},a.includeMthd({buildEditField:function(t,e){e?this.name=e:t.name&&(this.name=t.name),t.inputType&&(this.inputType=t.inputType),t.label?this.label=t.label:this.label=this.name,t.availability&&(this.availability=t.availability),t.entityListService&&(this.entityListService=t.entityListService)}});var p=appUtils.Class();p.prototype.$_buildObject=function(){this.includeFd({metadataName:"",representation:"",description:"",image:null,metadataEditFieldsSet:[],fmEditForm:{metadataEditFieldsSet:{},metadataEditFieldsPlacing:[]},fmListForm:{metadataEditFieldsSet:[],metadataFilterFieldsSet:[]}})},p.includeMthd({getEntityInstance:function(){return null},installMetadata:function(t,e,i,n,a){this.metadataName=t,this.getEntityInstance=e,i&&(this.representation=i),n&&(this.description=n),a&&(this.image=a)},bookEntityForms:function(t,e,i){var n;if(i&&(this.fmEditForm.metadataEditFieldsPlacing=i),t){var a=void 0;for(n=0;n<t.length;n++)(a=t[n]).availability&&this.metadataEditFieldsSet.push(a);for(n=0;n<this.metadataEditFieldsSet.length;n++)(a=this.metadataEditFieldsSet[n]).availabilityInEditForm&&(this.fmEditForm.metadataEditFieldsSet[a.name]=a),a.availabilityInListForm&&this.fmListForm.metadataEditFieldsSet.push(a)}if(e)for(n=0;n<t.length;n++)a=t[n],this.fmListForm.metadataFilterFieldsSet.push(a)}});var d=appUtils.Class();d.prototype.$_buildObject=function(){this.includeFd({metadataName:"",metadataRepresentation:"",metadataDescription:"",entityField:{objectField:{},entityField:{},defineField:{}},entityFieldsPlacing:[]})},d.includeMthd({getObjectFields:function(){var t=this.entityField.objectField;return t.metadataName=this.metadataName,t},getEntityFields:function(){var t=this.entityField.entityField,e={};for(var i in t)angular.isArray(t[i].value)?(e[i]=[],t[i].value.fillByTemplate&&(e[i].fillByTemplate=t[i].value.fillByTemplate),t[i].value.representationList&&(e[i].representationList=t[i].value.representationList)):"object"==typeof t[i].value?t[i].fieldDescription&&t[i].fieldDescription.getInstance?e[i]=t[i].fieldDescription.getInstance():e[i]={}:e[i]=t[i].value;return e},getEntityFieldsDescription:function(){var t=this.entityField.entityField,e=[];for(var i in t){var n=new a;n.buildEditField(t[i].fieldDescription,i),e.push(n)}return e},getEntityFieldsPlacing:function(){return this.entityFieldsPlacing}});var n=appUtils.Class();n.prototype.$_buildObject=function(){this.includeFd({entityList:Object.create(null),metadataEvents:l,userInterface:new appInterface.UserInterface})},n.includeMthd({installMetadataObjectEnum:function(t){var i=t.enumClass;return i.metadataName=t.metadataName,this.bookEntityList(i),this.metadataEvents.subscribe("ev:entityList:"+t.metadataName+":update",function(t,e){i.update(e)}),this},installMetadataObjectEntity:function(t){var e=t.entityClass,i=new d;i.metadataName=t.metadataName,i.metadataRepresentation=t.metadataRepresentation,i.metadataDescription=t.metadataDescription,appUtils.fillAllValuesProperty(t.entityField.entityField,i.entityField.entityField),appUtils.fillAllValuesProperty(t.entityField.objectField,i.entityField.objectField),i.entityField.defineField=t.entityField.defineField,i.entityField.entityField.id={value:"",fieldDescription:{inputType:"text",label:"id",availability:!0,entityListService:null}},i.entityField.entityField.description={value:"",fieldDescription:{inputType:"textarea",label:"description",availability:!0,entityListService:null}},i.entityFieldsPlacing=t.entityFieldsPlacing,e.prototype.$_buildObject=function(){this.includeEntityFd(i.getObjectFields(),i.getEntityFields(),i.entityField.defineField)};var n=new c;n.metadataName=i.metadataName;var a=new p;a.installMetadata(i.metadataName,t.fnGetEntityInstance,i.metadataRepresentation,i.metadataDescription);var r=i.getEntityFieldsDescription(),o=i.getEntityFieldsPlacing();a.bookEntityForms(r,void 0,o),this.bookMetadataObject(a),this.bookEntityList(n),l.subscribe("ev:entityList:"+i.metadataName+":update",function(t,e){n.update(e)}),l.subscribe("ev:entityList:"+i.metadataName+":deleteEntity",function(t,e,i){n.deleteEntity(e,i)});var s=this.userInterface.commandBar.commandBar.getSubMenu("modelDD");return null!=s&&s.addCommand(appInterface.getNewEntityCommand(t.metadataName,t.metadataRepresentation)),this},getMetadataSpecification:function(t){var e=this.entityList[t];return e||(e={metadataName:t,metadataObject:null,entityList:null},this.entityList[t]=e)},bookMetadataObject:function(t){this.getMetadataSpecification(t.metadataName).metadataObject=t},bookEntityList:function(t){var e=this.getMetadataSpecification(t.metadataName);e.entityList=t,e.entityList.metadataObject=e.metadataObject},getMetadataObject:function(t){return this.entityList[t]?this.entityList[t].metadataObject:void 0},getEntityList:function(t){return this.entityList[t]?this.entityList[t].entityList:void 0},getEntityInstance:function(t){var e=this.entityList[t];return e&&e.metadataObject?e.metadataObject.getEntityInstance():null},getInterface:function(){return this.userInterface},loadAllEntities:function(){var t;for(t in window.status="Load objects...",this.entityList)this.metadataEvents.publish("ev:entityList:"+t+":update")}}),abstractAppModel.resourceService=void 0,abstractAppModel.Entity=e,abstractAppModel.Enum=i,abstractAppModel.MetadataSet=n}(),appService.appInitialization||(appService.appInitialization=new Object(null));var appInitialization=appService.appInitialization;appInitialization.abstractAppModel=abstractAppModel,appInitialization.metadataSet=void 0,appInitialization.metadataSpecifications={enums:[],entities:[]},appInitialization.setMetadataSet=function(t){return appInitialization.metadataSet=void 0===t?new abstractAppModel.MetadataSet:t,appInitialization},appInitialization.getMetadataSet=function(){return appInitialization.metadataSet},appInitialization.initMetadataSet=function(){var t,e=appInitialization.metadataSet,i=appInterface.getNewDropdownCommand("modelDD","Model"),n=appInterface.getNewDropdownCommand("systemDD","System").addCommand(appInterface.getNewCommand("initDataBase","initDataBase",function(){ExecuteSystemCommand(abstractAppModel.resourceService,"jdbc/initDataBase")})).addCommand(appInterface.getNewCommand("runArchiveService","runArchiveService",function(){ExecuteSystemCommand(abstractAppModel.resourceService,"taskScheduler/runArchiveService")})).addCommand(appInterface.getNewCommand("stopArchiveService","stopArchiveService",function(){ExecuteSystemCommand(abstractAppModel.resourceService,"taskScheduler/stopArchiveService")})).addCommand(appInterface.getNewCommand("sendMail","sendMail",function(){ExecuteSystemCommand(abstractAppModel.resourceService,"taskScheduler/sendMail")})).addCommand(appInterface.getNewCommand("interruptTaskExecutor","interruptTaskExecutor",function(){ExecuteSystemCommand(abstractAppModel.resourceService,"taskScheduler/interruptTaskExecutor")})),a=new appInterface.UserInterface;for(a.appMetadataSet=e,a.commandBarSetMainUrl("#/task").commandBar.commandBar.addCommand(i).addCommand(n),e.userInterface=a,t=0;t<appInitialization.metadataSpecifications.enums.length;t++)e.installMetadataObjectEnum(appInitialization.metadataSpecifications.enums[t]);for(t=0;t<appInitialization.metadataSpecifications.entities.length;t++)e.installMetadataObjectEntity(appInitialization.metadataSpecifications.entities[t]);return appInitialization},appService.getMetadataSet=function(t){return abstractAppModel.resourceService=t,appInitialization.setMetadataSet().initEnumsModel().initProjectModel().initUserModel().initTaskModel().initFarmModel().initMetadataSet(),appInitialization.getMetadataSet()}}(window),function(t){t.appService||(t.appService=new Object(null));var e=new Object(null);(t.appService.forms=e).ListEntityController=function(i,e){this.appMetadataSet=e.getAppMetadaSet(),this.numPerpage=10,this.initController=function(){i.flagShowSearch=!1,i.$parent.openListForm=this.openListForm,i.$parent.closeListForm=this.closeListForm;var t=this.appMetadataSet.getEntityList(this.metadataName),e=this.appMetadataSet.userInterface.editFormGetEntityListForm();e.metadataName=this.metadataName,e.appMetadataSet=this.appMetadataSet,e.metadataSpecification=t,e.editFormName=t.metadataObject.description,e.formProperties=t.metadataObject.fmListForm.metadataEditFieldsSet,e.entities=t.list,e.numPerPage=this.numPerpage,e.currentPage=1,e.totalItems=t.list.length,e.entitiesFiltered=[],e.entitiesEmpty=[],e.eventCloseForm=this.closeListForm,e.eventUpdateForm=this.updateForm,e.eventAddNewEntity=this.addNewEntity,e.eventEditEntity=this.editEntity,e.eventDeleteEntity=this.deleteEntity,e.eventFindEntity=this.findEntity,e.openEditForm=this.openEditForm,e.updateViewEntityList=this.updateViewEntityList,e.closeListForm=this.closeListForm,e.eventPageChanged=this.pageChanged,i.entityListForm=e,(i.$parent.entityListForm=e).eventUpdateForm()},this.pageChanged=function(){var t=(this.currentPage-1)*this.numPerPage,e=t+this.numPerPage;this.entitiesFiltered=this.entities.slice(t,e),this.entitiesEmpty=new Array(this.numPerPage-this.entitiesFiltered.length)},this.addNewEntity=function(){this.openEditForm(this.appMetadataSet.getEntityList(this.metadataName).metadataObject.getEntityInstance())},this.editEntity=function(t){var e=this.appMetadataSet.getEntityList(this.metadataName).findEntityById(t);if(null!=e){var i=this.appMetadataSet.getEntityList(this.metadataName).metadataObject.getEntityInstance();appUtils.fillValuesProperty(e,i),this.openEditForm(i)}},this.deleteEntity=function(t){var e=this;this.appMetadataSet.getEntityList(this.metadataName).deleteEntity(t,function(t){e.updateViewEntityList()})},this.findEntity=function(t){var e=this;this.appMetadataSet.getEntityList(this.metadataName).findEntity(t,function(t){e.totalItems=e.entities.length,e.eventPageChanged()})},this.updateViewEntityList=function(){var t=this;this.appMetadataSet.metadataEvents.publish("ev:entityList:"+this.metadataName+":update",function(){t.totalItems=t.entities.length,t.eventPageChanged()})},this.openEditForm=function(t){e.setCurrentEntityByName(this.metadataName,t),this.closeListForm()},this.closeListForm=function(){i.$parent.showListForm=!1,i.$parent.openEditForm()},this.openListForm=function(){i.$parent.showListForm=!0,this.entityListForm.updateViewEntityList()},this.updateForm=function(){this.updateViewEntityList()}},e.EditEntityController=function(i,t){this.appMetadataSet=t.getAppMetadaSet(),this.currentEntity=t.getCurrentEntityByName(this.metadataName),this.initController=function(){i.$parent.openEditForm=this.openEditForm,i.$parent.closeEditForm=this.closeEditForm;var t=this.appMetadataSet.getEntityList(this.metadataName),e=this.appMetadataSet.userInterface.editFormGetEntityEditForm();e.metadataName=this.metadataName,e.appMetadataSet=this.appMetadataSet,e.metadataSpecification=t,e.editFormName="New "+this.metadataName+":",e.formProperties=t.metadataObject.fmEditForm.metadataEditFieldsSet,e.entityFieldsPlacing=t.metadataObject.fmEditForm.metadataEditFieldsPlacing,e.eventCloseForm=this.closeEditForm,e.eventUpdateForm=this.updateForm,e.eventCreateEntity=this.createEntity,e.openEditForm=this.openEditForm,e.closeEditForm=this.closeEditForm,e.updateForm=this.updateForm,e.createEntity=this.createEntity,i.entityEditForm=e,i.$parent.entityEditForm=e},this.updateForm=function(){this.currentEntity=t.getCurrentEntityByName(this.metadataName)},this.createEntity=function(t){var e=this.appMetadataSet.getEntityList(this.metadataName),i=this;e.addEntityByTemplate(t,function(){i.appMetadataSet.metadataEvents.publish("ev:entityList:"+i.metadataName+":update",function(){i.closeEditForm()})})},this.openEditForm=function(){i.$parent.showEditForm=!0,this.entityEditForm.updateForm()},this.closeEditForm=function(){i.$parent.showEditForm=!1,i.$parent.openListForm()}}}(window),function(e){e.initEnumsModel=function(){var t={enumClass:new e.abstractAppModel.Enum,metadataName:"taskState"};return e.metadataSpecifications.enums.push(t),e}}(appService.appInitialization),function(r){r.initUserModel=function(){var n=r.metadataSet,t=appUtils.Class(r.abstractAppModel.Entity),e={entityClass:t,fnGetEntityInstance:function(){return new t},metadataName:"user",metadataRepresentation:"User",metadataDescription:"User list",entityField:{objectField:{},entityField:{username:{value:"",fieldDescription:{inputType:"text",label:"username",availability:!0,entityListService:null}},password:{value:"",fieldDescription:{inputType:"text",label:"password",availability:!0,entityListService:null}},mailAddress:{value:"",fieldDescription:{inputType:"text",label:"mailAddress",availability:!0,entityListService:null}},enabled:{value:!1,fieldDescription:{inputType:"checkbox",label:"enabled",availability:!1,entityListService:null}}},defineField:{representation:{enumerable:!0,get:function(){return this.username+" ("+this.description+") "}}}},entityFieldsPlacing:[[{editFieldId:"id",fieldLength:3}],[{editFieldId:[[{editFieldId:"username",fieldLength:12}],[{editFieldId:"password",fieldLength:12}],[{editFieldId:"mailAddress",fieldLength:12}]],fieldLength:5}],[{editFieldId:"description",fieldLength:12}]]},i=appUtils.Class(r.abstractAppModel.Entity),a={entityClass:i,fnGetEntityInstance:function(){return new i},metadataName:"role",metadataRepresentation:"Role",metadataDescription:"Role list",entityField:{objectField:{},entityField:{role:{value:"",fieldDescription:{inputType:"text",label:"role",availability:!0,entityListService:null}},users:{value:[],fieldDescription:{inputType:"multiselect",label:"users",availability:!0,entityListService:function(){return n.getEntityList("user")}}}},defineField:{representation:{enumerable:!0,get:function(){return""+this.role}}}},entityFieldsPlacing:[[{editFieldId:"id",fieldLength:3},{editFieldId:[[{editFieldId:"role",fieldLength:12}]],fieldLength:5}],[{editFieldId:"users",fieldLength:5},{editFieldId:"description",fieldLength:12}]]};return a.entityField.entityField.users.value.representationList=function(){for(var t="",e=0;e!=this.length;)t=t+"; "+this[e].representation,e+=1;return t},a.entityField.entityField.users.value.fillByTemplate=function(t){for(var e=this.length=0;e!=t.length;){var i=n.getEntityInstance("user");appUtils.fillValuesProperty(t[e],i),this.push(i),e+=1}},r.metadataSpecifications.entities.push(a),r.metadataSpecifications.entities.push(e),r}}(appService.appInitialization),function(i){i.initProjectModel=function(){i.metadataSet;var t=appUtils.Class(i.abstractAppModel.Entity),e={entityClass:t,fnGetEntityInstance:function(){return new t},metadataName:"project",metadataRepresentation:"Project",metadataDescription:"Project list",entityField:{objectField:{},entityField:{name:{value:"",fieldDescription:{inputType:"text",label:"name",availability:!0,entityListService:null}}},defineField:{representation:{enumerable:!0,get:function(){return""+this.name}}}},entityFieldsPlacing:[[{editFieldId:"id",fieldLength:3},{editFieldId:[[{editFieldId:"name",fieldLength:12}]],fieldLength:5}],[{editFieldId:"description",fieldLength:12}]]};return i.metadataSpecifications.entities.push(e),i}}(appService.appInitialization),function(i){i.initTaskModel=function(){var n=i.metadataSet,t=appUtils.Class(i.abstractAppModel.Entity),e={entityClass:t,fnGetEntityInstance:function(){return new t},metadataName:"task",metadataRepresentation:"Task",metadataDescription:"Task list",entityField:{objectField:{},entityField:{plainTime:{value:0,fieldDescription:{inputType:"number",label:"plain time",availability:!0,entityListService:null}},date:{value:"",fieldDescription:{inputType:"date",label:"date",availability:!0,entityListService:null}},title:{value:"",fieldDescription:{inputType:"text",label:"title",availability:!0,entityListService:null}},author:{value:{},fieldDescription:{inputType:"select",label:"author",availability:!0,getInstance:function(){return n.getEntityInstance("user")},entityListService:function(){return n.getEntityList("user")}}},executor:{value:[],fieldDescription:{inputType:"multiselect",label:"executor",availability:!0,entityListService:function(){return n.getEntityList("user")}}},project:{value:{},fieldDescription:{inputType:"select",label:"project",availability:!0,getInstance:function(){return n.getEntityInstance("project")},entityListService:function(){return n.getEntityList("project")}}},state:{value:"TODO",fieldDescription:{inputType:"enum",label:"state",availability:!0,entityListService:function(){return n.getEntityList("taskState")}}}},defineField:{representation:{enumerable:!0,get:function(){return this.date+" /"+this.title+"/ ("+this.description+") "}}}},entityFieldsPlacing:[[{editFieldId:"id",fieldLength:3},{editFieldId:[[{editFieldId:"date",fieldLength:4},{editFieldId:"state",fieldLength:4}],[{editFieldId:"title",fieldLength:12}],[{editFieldId:"project",fieldLength:7},{editFieldId:"executor",fieldLength:5}]],fieldLength:9}],[{editFieldId:"plainTime",fieldLength:3}],[{editFieldId:"description",fieldLength:12}],[{editFieldId:"author",fieldLength:3}]]};return e.entityField.entityField.executor.value.representationList=function(){for(var t="",e=0;e!=this.length;)t=t+"; "+this[e].representation,e+=1;return t},e.entityField.entityField.executor.value.fillByTemplate=function(t){for(var e=this.length=0;e!=t.length;){var i=n.getEntityInstance("user");appUtils.fillValuesProperty(t[e],i),this.push(i),e+=1}},i.metadataSpecifications.entities.push(e),i}}(appService.appInitialization),function(i){i.initFarmModel=function(){i.metadataSet;var t=appUtils.Class(i.abstractAppModel.Entity),e={entityClass:t,fnGetEntityInstance:function(){return new t},metadataName:"farm",metadataRepresentation:"farm",metadataDescription:"Farm list",entityField:{objectField:{},entityField:{name:{value:"",fieldDescription:{inputType:"text",label:"name",availability:!0,entityListService:null}}},defineField:{representation:{enumerable:!0,get:function(){return""+this.name}}}},entityFieldsPlacing:[[{editFieldId:"id",fieldLength:3},{editFieldId:[[{editFieldId:"name",fieldLength:12}]],fieldLength:5}],[{editFieldId:"description",fieldLength:12}]]};return i.metadataSpecifications.entities.push(e),i}}(appService.appInitialization),function(t){t.appController||(t.appController=new Object(null)),t.appController.workPlaceController=function(t,e,i,n,a,r,o,s,l){var c=i,p=appService.getMetadataSet(s);o.setAppMetadataSet(p),a.errorDescriptions=p.userInterface.errorDescriptions,a.commandBar=p.userInterface.commandBar,a.principal=p.userInterface.security.principal;var d=a;a.getCurrentTime=function(){return l(new Date,"M/d/yy h:mm:ss a")},a.login=function(){d.showLogin=!0,r.url("/login")},a.eventAfterLogin=function(){var t=o.getAppMetadaSet();t.loadAllEntities();var e=t.userInterface.security.principal;e.authenticated?(e.getSessionInformation(s,c),e.updatePrincipalUser(t),d.principal=e,d.showLogin=!1):r.url(o.getAppConfig().appUrl)},a.logout=function(){var t=o.getAppMetadaSet().userInterface.security.principal;t.authenticated&&(t.logout(e),r.url(o.getAppConfig().appUrl))}}}(window),function(t){t.appController||(t.appController=new Object(null));var e=t.appController;e.userController=function(t){t.showEditForm=!1,t.showListForm=!0,t.openEditForm=function(){},t.closeEditForm=function(){},t.openListForm=function(){},t.closeListForm=function(){}},e.editUserController=function(t,e){appService.forms.EditEntityController.apply(this,arguments),this.metadataName="user",this.initController()},e.userListController=function(t,e){appService.forms.ListEntityController.apply(this,arguments),this.metadataName="user",this.initController()},e.roleController=function(t){t.showEditForm=!1,t.showListForm=!0,t.openEditForm=function(){},t.closeEditForm=function(){},t.openListForm=function(){},t.closeListForm=function(){}},e.editRoleController=function(t,e){appService.forms.EditEntityController.apply(this,arguments),this.metadataName="role",this.initController()},e.roleListController=function(t,e){appService.forms.ListEntityController.apply(this,arguments),this.metadataName="role",this.initController()}}(window),function(t){t.appController||(t.appController=new Object(null));var e=t.appController;e.projectController=function(t){t.showEditForm=!1,t.showListForm=!0,t.openEditForm=function(){},t.closeEditForm=function(){},t.openListForm=function(){},t.closeListForm=function(){}},e.editProjectController=function(t,e){appService.forms.EditEntityController.apply(this,arguments),this.metadataName="project",this.initController()},e.projectListController=function(t,e){appService.forms.ListEntityController.apply(this,arguments),this.metadataName="project",this.initController()}}(window),function(t){t.appController||(t.appController=new Object(null));var e=t.appController;e.taskController=function(t){t.showEditForm=!1,t.showListForm=!0,t.openEditForm=function(){},t.closeEditForm=function(){},t.openListForm=function(){},t.closeListForm=function(){}},e.editTaskController=function(t,e){appService.forms.EditEntityController.apply(this,arguments),this.metadataName="task",this.initController()},e.taskListController=function(t,e){appService.forms.ListEntityController.apply(this,arguments),this.metadataName="task",this.initController()}}(window),function(t){t.appController||(t.appController=new Object(null));var e=t.appController;e.farmController=function(t){t.showEditForm=!1,t.showListForm=!0,t.openEditForm=function(){},t.closeEditForm=function(){},t.openListForm=function(){},t.closeListForm=function(){}},e.editFarmController=function(t,e){appService.forms.EditEntityController.apply(this,arguments),this.metadataName="farm",this.initController()},e.farmListController=function(t,e){appService.forms.ListEntityController.apply(this,arguments),this.metadataName="farm",this.initController()}}(window);var app=angular.module("app",["ui.bootstrap","ngResource","ngRoute","ngCookies","oi.select","cfp.hotkeys"]);app.constant("appConfig",{appName:"appTaskList",appUrl:"/"+this.appName}),app.config(["$locationProvider",function(t){t.hashPrefix("")}]).config(["$httpProvider",function(t){t.interceptors.push("myHttpResponseInterceptor")}]).config(["$routeProvider",function(t){appService.setRoute(t)}]).config(["$provide",function(t){t.decorator("$locale",["$delegate",function(t){return t.NUMBER_FORMATS.PATTERNS[1].negPre="-¤",t.NUMBER_FORMATS.PATTERNS[1].negSuf="",t}])}]),app.service("appEnvironment",["$location","appConfig",function(t,e){return appService.appEnvironment(t,e)}]).service("dataStorage",["appConfig",function(t){return appService.dataStorage(t)}]),app.factory("myHttpResponseInterceptor",["$q","dataStorage",function(t,e){return appService.appHttpResponseInterceptor(t,e)}]).factory("entityEditService",["$resource","appEnvironment",function(t,e){return appService.entityEditService(t,e)}]).factory("securityService",["$resource","appEnvironment",function(t,e){return appService.securityService(t,e)}]).factory("operationService",["$resource","appEnvironment",function(t,e){return appService.operationService(t,e)}]).factory("systemService",["$resource","appEnvironment",function(t,e){return appService.systemService(t,e)}]).factory("resourceService",function(t,e,i,n){return appService.resourceService(t,e,i,n)}),app.directive("smDatepicker",function(){return appDirective.formsDirective.directiveDatePicker()}).directive("button",function(){return appDirective.formsDirective.directiveButton()}).directive("entityProperty",function(){return appDirective.formsDirective.directiveEntityProperty()}).directive("entityEditForm",function(){return appDirective.formsDirective.directiveEntityEditForm()}).directive("entityEditFormCol",["$compile",function(t){return appDirective.formsDirective.directiveEntityEditFormCol(t)}]).directive("entityEditFormRow",function(){return appDirective.formsDirective.directiveEntityEditFormRow()}).directive("entityListForm",function(){return appDirective.formsDirective.directiveEntityListForm()}).directive("updatableText",["$interval",function(t){return appDirective.directiveUpdatableText(t)}]).directive("messageLine",[function(){return appDirective.directiveMessageLine()}]).directive("menuBar",[function(){return appDirective.directiveMenuBar()}]).directive("menuCollection",[function(){return appDirective.directiveMenuCollection()}]).directive("menuItem",["$compile",function(t){return appDirective.directiveMenuItem(t)}]).directive("loginPage",[function(){return appDirective.directiveLoginPage()}]),app.filter("myDate",["dateFilter",function(e){return function(t){return null==t?"":e(new Date(t),"dd.MM.yyyy").toUpperCase()}}]),app.controller("workPlaceController",["$window","$http","$cookies","$rootScope","$scope","$location","dataStorage","resourceService","dateFilter",appController.workPlaceController]).controller("farmController",["$scope",appController.farmController]).controller("farmListController",["$scope","dataStorage",appController.farmListController]).controller("editFarmController",["$scope","dataStorage",appController.editFarmController]).controller("projectController",["$scope",appController.projectController]).controller("projectListController",["$scope","dataStorage",appController.projectListController]).controller("editProjectController",["$scope","dataStorage",appController.editProjectController]).controller("taskController",["$scope",appController.taskController]).controller("taskListController",["$scope","dataStorage",appController.taskListController]).controller("editTaskController",["$scope","dataStorage",appController.editTaskController]).controller("userController",["$scope",appController.userController]).controller("userListController",["$scope","dataStorage",appController.userListController]).controller("editUserController",["$scope","dataStorage",appController.editUserController]).controller("roleController",["$scope",appController.roleController]).controller("roleListController",["$scope","dataStorage",appController.roleListController]).controller("editRoleController",["$scope","dataStorage",appController.editRoleController]);